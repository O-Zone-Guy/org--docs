#+NAME: get-list
#+BEGIN_SRC python :exports results :results value raw :var cur_file="code_snippets.org"
  import re
  from fnmatch import fnmatch
  from os import listdir

  FILES = [f for f in listdir('.') if fnmatch(f, '[!\.\*]*.org') and f != cur_file]

  r = re.compile('#\+TITLE: (.*)', re.I)

  lists = ""
  for f in FILES:
      fr = open(f, 'r')
      try:
          lists += " - [[file:" + f + "][" + r.match(fr.read()).group(1) + "]]\n"
          # lists +=  r.match(fr.read()).group(1) + "\n"
      except:
          pass

  return lists
#+END_SRC
